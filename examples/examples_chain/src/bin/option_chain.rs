/******************************************************************************
   Author: Joaquín Béjar García
   Email: jb@taunais.com
   Date: 26/9/24
******************************************************************************/
use optionstratlib::prelude::*;
use rust_decimal_macros::dec;
use tracing::info;

fn main() {
    setup_logger();
    let mut chain = OptionChain::new(
        "SP500",
        pos_or_panic!(5781.88),
        "18 oct 2024".to_string(),
        None,
        None,
    );

    chain.add_option(
        pos_or_panic!(5520.0),
        spos!(274.26),
        spos!(276.06),
        spos!(13.22),
        spos!(14.90),
        pos_or_panic!(16.31),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        spos!(1.0),
        Some(300),
        None,
    );
    chain.add_option(
        pos_or_panic!(5525.0),
        spos!(269.62),
        spos!(271.42),
        spos!(13.54),
        spos!(15.27),
        pos_or_panic!(16.205),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5530.0),
        spos!(265.00),
        spos!(266.80),
        spos!(13.88),
        spos!(15.65),
        pos_or_panic!(16.1),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5540.0),
        spos!(255.78),
        spos!(257.58),
        spos!(14.62),
        spos!(16.42),
        pos_or_panic!(15.89),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5550.0),
        spos!(246.61),
        spos!(248.41),
        spos!(15.42),
        spos!(17.22),
        pos_or_panic!(15.68),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5560.0),
        spos!(237.49),
        spos!(239.29),
        spos!(15.96),
        spos!(18.07),
        pos_or_panic!(15.47),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5570.0),
        spos!(228.42),
        spos!(230.22),
        spos!(17.18),
        spos!(18.98),
        pos_or_panic!(15.26),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5575.0),
        spos!(223.91),
        spos!(225.71),
        spos!(17.65),
        spos!(19.45),
        pos_or_panic!(15.155),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5580.0),
        spos!(219.42),
        spos!(221.22),
        spos!(18.14),
        spos!(19.94),
        pos_or_panic!(15.05),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5590.0),
        spos!(210.48),
        spos!(212.28),
        spos!(18.07),
        spos!(20.23),
        pos_or_panic!(14.84),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5600.0),
        spos!(201.60),
        spos!(203.40),
        spos!(19.17),
        spos!(20.97),
        pos_or_panic!(14.63),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5610.0),
        spos!(192.80),
        spos!(194.60),
        spos!(21.43),
        spos!(23.23),
        pos_or_panic!(14.42),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5620.0),
        spos!(184.08),
        spos!(185.88),
        spos!(22.68),
        spos!(24.48),
        pos_or_panic!(14.21),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5625.0),
        spos!(179.75),
        spos!(181.55),
        spos!(23.33),
        spos!(25.13),
        pos_or_panic!(14.105),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5630.0),
        spos!(175.44),
        spos!(177.24),
        spos!(24.01),
        spos!(25.81),
        pos_or_panic!(14.0),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5640.0),
        spos!(167.02),
        spos!(168.82),
        spos!(25.56),
        spos!(27.36),
        pos_or_panic!(13.82),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5650.0),
        spos!(158.71),
        spos!(160.51),
        spos!(27.22),
        spos!(29.02),
        pos_or_panic!(13.64),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5660.0),
        spos!(150.51),
        spos!(152.31),
        spos!(28.99),
        spos!(30.79),
        pos_or_panic!(13.46),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5670.0),
        spos!(142.43),
        spos!(144.23),
        spos!(30.89),
        spos!(32.69),
        pos_or_panic!(13.28),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5675.0),
        spos!(138.44),
        spos!(140.24),
        spos!(31.88),
        spos!(33.68),
        pos_or_panic!(13.19),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5680.0),
        spos!(134.48),
        spos!(136.28),
        spos!(32.91),
        spos!(34.71),
        pos_or_panic!(13.1),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5690.0),
        spos!(126.67),
        spos!(128.47),
        spos!(35.07),
        spos!(36.87),
        pos_or_panic!(12.92),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5700.0),
        spos!(119.01),
        spos!(120.81),
        spos!(37.37),
        spos!(39.17),
        pos_or_panic!(12.74),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5710.0),
        spos!(111.50),
        spos!(113.30),
        spos!(39.83),
        spos!(41.63),
        pos_or_panic!(12.56),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5720.0),
        spos!(104.16),
        spos!(105.96),
        spos!(42.46),
        spos!(44.26),
        pos_or_panic!(12.38),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5730.0),
        spos!(96.99),
        spos!(98.79),
        spos!(45.27),
        spos!(47.07),
        pos_or_panic!(12.2),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5740.0),
        spos!(90.02),
        spos!(91.82),
        spos!(48.26),
        spos!(50.06),
        pos_or_panic!(12.02),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5750.0),
        spos!(83.24),
        spos!(85.04),
        spos!(51.45),
        spos!(53.25),
        pos_or_panic!(11.84),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5760.0),
        spos!(76.67),
        spos!(78.47),
        spos!(54.85),
        spos!(56.65),
        pos_or_panic!(11.66),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5770.0),
        spos!(70.32),
        spos!(72.12),
        spos!(58.47),
        spos!(60.27),
        pos_or_panic!(11.48),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5780.0),
        spos!(64.20),
        spos!(66.00),
        spos!(62.32),
        spos!(64.12),
        pos_or_panic!(11.3),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5790.0),
        spos!(58.50),
        spos!(60.30),
        spos!(66.59),
        spos!(68.39),
        pos_or_panic!(11.15),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5800.0),
        spos!(53.04),
        spos!(54.84),
        spos!(71.11),
        spos!(72.91),
        pos_or_panic!(11.0),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5810.0),
        spos!(47.85),
        spos!(49.65),
        spos!(75.89),
        spos!(77.69),
        pos_or_panic!(10.85),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5820.0),
        spos!(42.93),
        spos!(44.73),
        spos!(80.94),
        spos!(82.74),
        pos_or_panic!(10.7),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5830.0),
        spos!(38.29),
        spos!(40.09),
        spos!(86.27),
        spos!(88.07),
        pos_or_panic!(10.55),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5840.0),
        spos!(33.93),
        spos!(35.73),
        spos!(91.87),
        spos!(93.67),
        pos_or_panic!(10.4),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5850.0),
        spos!(29.85),
        spos!(31.65),
        spos!(97.77),
        spos!(99.57),
        pos_or_panic!(10.25),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5900.0),
        spos!(16.05),
        spos!(17.85),
        spos!(133.82),
        spos!(135.62),
        pos_or_panic!(10.058),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(5950.0),
        spos!(8.05),
        spos!(9.08),
        spos!(175.28),
        spos!(177.08),
        pos_or_panic!(9.928),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(6000.0),
        spos!(3.38),
        spos!(4.38),
        spos!(220.45),
        spos!(222.25),
        pos_or_panic!(9.798),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(6050.0),
        spos!(1.06),
        spos!(2.06),
        spos!(267.98),
        spos!(269.78),
        pos_or_panic!(9.668),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(6100.0),
        spos!(0.05),
        spos!(1.05),
        spos!(316.82),
        spos!(318.62),
        pos_or_panic!(9.538),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(6150.0),
        spos!(0.00),
        spos!(1.00),
        spos!(366.30),
        spos!(368.10),
        pos_or_panic!(9.46),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );
    chain.add_option(
        pos_or_panic!(6200.0),
        spos!(0.00),
        spos!(1.00),
        spos!(416.03),
        spos!(417.83),
        pos_or_panic!(9.46),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        Some(dec!(0.5)),
        None,
        None,
        None,
    );

    info!("\n{}", chain);

    chain.save_to_csv("./examples/Chains").unwrap();
    chain.save_to_json("./examples/Chains").unwrap();
    let _ = OptionChain::load_from_csv("./examples/Chains/SP500-18-oct-2024-5781.88.csv").unwrap();
    let _ =
        OptionChain::load_from_json("./examples/Chains/SP500-18-oct-2024-5781.88.json").unwrap();
}
